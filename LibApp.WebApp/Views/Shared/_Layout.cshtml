<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8"/>
        <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-icon.png">
        <link rel="icon" type="image/png" href="/img/favicon.png">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>

        <title>@ViewData["Title"] - LibApp.WebApp</title>

        <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no' name='viewport'/>

        @*<meta name="RequestVerificationToken" content="your-token-value" /> *@

        <!--     Fonts and icons     -->
        <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet"/>
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">

        <!-- CSS Files -->
        <link href="/css/bootstrap.min.css" rel="stylesheet"/>
        <link href="/css/paper-dashboard.css?v=2.0.1" rel="stylesheet"/>
        <link href="/demo/demo.css" rel="stylesheet"/>
        <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
        
        @RenderSection("Scripts", required: false)
    </head>

    <body>

        <div class="wrapper ">
                    
            @Html.Partial("Partials/_SidebarPartial")
                    
            <div class="main-panel">

                <!-- Navbar -->

                @Html.Partial("Partials/_NavbarPartial")
                <!-- End Navbar -->

                <div class="content">

                    <!-- Success & Error -->

                    @if (TempData["SuccessMessage"] != null)
                    {
                        <div class="alert alert-success alert-dismissible fade show" role="alert">
                            @TempData["SuccessMessage"]
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    }

                    @if (TempData["ErrorMessage"] != null)
                    {
                        <div class="alert alert-danger alert-dismissible fade show" role="alert">
                            @TempData["ErrorMessage"]
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                    }

                    <!-- Success & Error End -->

                    @RenderBody()
                </div>

                @Html.Partial("Partials/_FooterPartial")

            </div>
        </div>

        <!--   Core JS Files   -->
        <script src="/js/core/jquery.min.js"></script>
        <script src="/js/core/popper.min.js"></script>
        <script src="/js/core/bootstrap.min.js"></script>
        <script src="/js/plugins/perfect-scrollbar.jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

        <!--  Google Maps Plugin    -->
        <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
        <!-- Chart JS -->
        <script src="/js/plugins/chartjs.min.js"></script>
        <!--  Notifications Plugin    -->
        <script src="/js/plugins/bootstrap-notify.js"></script>

        <script src="/demo/demo.js"></script>
    
        <!-- Select2 -->
        <script>
            $(document).ready(function () {
                $("#AuthorIds").select2({
                    placeholder: "Select authors", // Placeholder text
                });
            });

            $(document).ready(function () {
                $("#PublisherId").select2({
                    placeholder: "Select publishers", // Placeholder text
                });
            });

            $(document).ready(function () {
                $("#CategoryId").select2({
                    placeholder: "Select categories", // Placeholder text
                });
            });

            $(document).ready(function () {
                $("#DepartmentId").select2({
                    placeholder: "Select departments", // Placeholder text
                });
            });

            $(document).ready(function () {
                $("#LanguageId").select2({
                    placeholder: "Select languages", // Placeholder text
                });
            });

            $(document).ready(function () {
                var releaseYearInput = document.getElementById("ReleaseYear");
                releaseYearInput.value = new Date().getFullYear();
            });
        </script>

        <!-- Delete -->
        <script>
        $(document).ready(function () {
            $('.delete-button').on('click', function (event) {
                event.preventDefault(); // Prevent the default behavior of the anchor element

                var bookId = $(this).data('book-id');
                var confirmation = confirm('Are you sure you want to delete this book?');

                if (confirmation) {
                    $.ajax({
                        url: '@Url.Action("Delete", "Books")',
                        data: { id: bookId },
                        type: 'POST',
                        // headers: {
                        //     RequestVerificationToken: $('meta[name="RequestVerificationToken"]').attr('content')
                        // },
                        success: function (data) {
                            // console.log('success');

                            location.reload();
                        },
                        error: function (xhr, ajaxOptions, thrownError) {
                            // console.log('error');
                            alert('Error: ' + xhr.responseText);
                        }
                    });
                }
            });
        });
        </script>

    </body>

</html>
